function loadImg(){function e(){d=new Image,d.onload=a,d.src=l.result}function a(){var e=$(".imgcanv")[0],a=e.getContext("2d"),i=d.naturalWidth,l=d.naturalHeight,t=e.width,o=e.height;if(i>l){var n=i/t*100;if(100>=n)$("main").addClass("hasimg"),a.clearRect(0,0,t,o),a.drawImage(d,t/2-(i-40)/2,o/2-(l-40)/2,i-40,l-40),$(".loader").toggleClass("hide");else{var s=n/100,r=l/s;$("main").addClass("hasimg"),a.clearRect(0,0,t,o),a.drawImage(d,t/2-(t-40)/2,o/2-(r-40)/2,t-40,r-40),$(".loader").toggleClass("hide")}}else if(l>=i){var g=l/o*100;if(100>=g)$("main").addClass("hasimg"),a.clearRect(0,0,t,o),a.drawImage(d,t/2-(i-40)/2,o/2-(l-40)/2,i-40,l-40),$(".loader").toggleClass("hide");else{var s=g/100,h=i/s;$("main").addClass("hasimg"),a.clearRect(0,0,t,o),a.drawImage(d,t/2-(h-40)/2,o/2-(o-40)/2,h-40,o-40),$(".loader").toggleClass("hide")}}}var i,l,d,t=$(".loadimg")[0];return $(".loader").toggleClass("hide"),"function"!=typeof window.FileReader?(alert("FILTERR is not supported by your browser!"),!1):(t?t.files?t.files[0]?(i=t.files[0],l=new FileReader,l.onload=e,l.readAsDataURL(i)):(alert("Please select a file first!"),$(".loader").toggleClass("hide")):(alert('Browser does not support "files" property of file inputs.'),$(".loader").toggleClass("hide")):(alert("No file!"),$(".loader").toggleClass("hide")),void 0)}$(function(){var e;$(".svgload").load("../svg/svgdefs.html"),$(window).on("resize",function(){clearTimeout(e),e=setTimeout(function(){$("main").hasClass("hasimg")?($(".imgcanv")[0].width=window.innerWidth,$(".imgcanv")[0].height=window.innerHeight-150,loadImg()):($(".imgcanv")[0].width=window.innerWidth,$(".imgcanv")[0].height=window.innerHeight-150)},250)}),$(".imgcanv")[0].width=window.innerWidth,$(".imgcanv")[0].height=window.innerHeight-150,$(".submitload").on("click",loadImg)});
function resetAll(){var t=slider.attr("data-currentfilter");return"undefined"==typeof t&&null!==t?!1:(window.filters.blur[2]=0,window.filters.brightness[2]=100,window.filters.contrast[2]=100,window.filters.grayscale[2]=0,window.filters.hueRotate[2]=0,window.filters.invert[2]=0,window.filters.opacity[2]=100,window.filters.saturate[2]=100,window.filters.sepia[2]=0,applyFilter(),setCurrent(t),void 0)}function resetCurrent(t){var e=slider.attr("data-currentfilter");return"undefined"==typeof e&&null!==e?!1:(window.filters[t][2]=window.defaults[t],applyFilter(),setCurrent(e),void 0)}function setCurrent(t){return $("main").hasClass("hasimg")?"undefined"==typeof t&&null!==t?!1:(slider.attr("data-currentfilter",t),slider[0].min=window.filters[t][0],slider[0].max=window.filters[t][1],slider[0].value=window.filters[t][2],void 0):!1}function applyFilter(){canvas.css({filter:" blur("+window.filters.blur[2]+"px) brightness("+window.filters.brightness[2]+"%) contrast("+window.filters.contrast[2]+"%) grayscale("+window.filters.grayscale[2]+"%) hue-rotate("+window.filters.hueRotate[2]+"deg) invert("+window.filters.invert[2]+"%) opacity("+window.filters.opacity[2]+"%) saturate("+window.filters.saturate[2]+"%) sepia("+window.filters.sepia[2]+"%)","-webkit-filter":" blur("+window.filters.blur[2]+"px) brightness("+window.filters.brightness[2]+"%) contrast("+window.filters.contrast[2]+"%) grayscale("+window.filters.grayscale[2]+"%) hue-rotate("+window.filters.hueRotate[2]+"deg) invert("+window.filters.invert[2]+"%) opacity("+window.filters.opacity[2]+"%) saturate("+window.filters.saturate[2]+"%) sepia("+window.filters.sepia[2]+"%)"})}var filters={blur:[0,50,0],brightness:[0,200,100],contrast:[0,200,100],grayscale:[0,100,0],hueRotate:[0,360,0],invert:[0,100,0],opacity:[0,100,100],saturate:[0,200,100],sepia:[0,100,0]},defaults={blur:0,brightness:100,contrast:100,grayscale:0,hueRotate:0,invert:0,opacity:100,saturate:100,sepia:0},canvas=$(".imgcanv"),slider=$(".slider"),currentFilter=slider.attr("data-currentfilter");slider.on("input change",function(){var t=slider.attr("data-currentfilter"),e=$(this)[0].value;return"undefined"==typeof t&&null!==t?!1:(window.filters[t][2]=e,applyFilter(),void 0)}),$(".tool").on("click",function(){return $("main").hasClass("hasimg")?($(this).addClass("active"),$(this).siblings().removeClass("active"),void 0):!1});